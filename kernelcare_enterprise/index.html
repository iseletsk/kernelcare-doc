<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>KernelCare.ePortal | Documentation</title>
    <meta name="description" content="Kernelcare documentation">
    <script src="https://js.hs-scripts.com/5408110.js"></script>
    
    <link rel="preload" href="/assets/css/0.styles.aa8d4879.css" as="style"><link rel="preload" href="/assets/js/app.e4772670.js" as="script"><link rel="preload" href="/assets/js/14.802341b0.js" as="script"><link rel="prefetch" href="/assets/js/10.d584627e.js"><link rel="prefetch" href="/assets/js/11.f2b751e2.js"><link rel="prefetch" href="/assets/js/12.5d0fa166.js"><link rel="prefetch" href="/assets/js/13.076200dc.js"><link rel="prefetch" href="/assets/js/15.eddf1c5a.js"><link rel="prefetch" href="/assets/js/16.a4bbb24c.js"><link rel="prefetch" href="/assets/js/17.1e19c169.js"><link rel="prefetch" href="/assets/js/18.6cad723b.js"><link rel="prefetch" href="/assets/js/19.fc230c9a.js"><link rel="prefetch" href="/assets/js/20.deed30c1.js"><link rel="prefetch" href="/assets/js/21.ebacf6de.js"><link rel="prefetch" href="/assets/js/22.4e187fb4.js"><link rel="prefetch" href="/assets/js/23.5b4cd751.js"><link rel="prefetch" href="/assets/js/24.18e4d235.js"><link rel="prefetch" href="/assets/js/25.fa444b2f.js"><link rel="prefetch" href="/assets/js/3.77131f55.js"><link rel="prefetch" href="/assets/js/4.9d5cd77f.js"><link rel="prefetch" href="/assets/js/5.2ea995a5.js"><link rel="prefetch" href="/assets/js/6.ccdec5d2.js"><link rel="prefetch" href="/assets/js/7.7469ee64.js"><link rel="prefetch" href="/assets/js/8.0518e05f.js"><link rel="prefetch" href="/assets/js/9.a3831415.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.97bda272.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aa8d4879.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Documentation" class="logo"> <span class="site-name site-name--documentation can-hide">Documentation</span></a> <form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <div class="links" style="max-width:nullpx;"><a href="https://cloudlinux.com/kernelcare-free-trial5" target="_blank" class="btn">
      Try Free
    </a> <nav class="nav-links can-hide"></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><div class="sidebar-heading open"><span>Content</span> <!----></div> <ul class="sidebar-group-items"><li><a href="/installation/" class="sidebar-link">Installation of KernelCare</a></li><li><a href="/settings/" class="sidebar-link">Basic Management</a></li><li><a href="/command_line/" class="sidebar-link">Command Line Tools</a></li><li><a href="/config_options/" class="sidebar-link">Config Options</a></li><li><a href="/disabling_some_patches/" class="sidebar-link">Disabling Some Patches</a></li><li><a href="/delayed_feed/" class="sidebar-link">Delayed Feed</a></li><li><a href="/extra_patchset/" class="sidebar-link">Extra Patchset</a></li><li><a href="/sticky_patches/" class="sidebar-link">Sticky Patches</a></li><li><a href="/nagios_plugin/" class="sidebar-link">Nagios Plugin</a></li><li><a href="/zabbix_template/" class="sidebar-link">Zabbix Template</a></li><li><a href="/upgrade/" class="sidebar-link">Upgrade</a></li><li><a href="/uninstall/" class="sidebar-link">Uninstall KernelCare</a></li><li><a href="/technology/" class="sidebar-link">Technology</a></li><li><a href="/AWS_deployment_guide/" class="sidebar-link">KernelCare on AWS – Deployment User Guide</a></li><li><a href="/reseller_partner_ui/" class="sidebar-link">Reseller Partner UI</a></li><li><a href="/kernelcare_enterprise/" class="active sidebar-link">KernelCare.ePortal</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#eportal-hardware-requirements" class="sidebar-link">ePortal Hardware Requirements</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#installation" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-eportal-on-el6" class="sidebar-link">KernelCare.ePortal on EL6</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-eportal-on-el7" class="sidebar-link">KernelCare.ePortal on EL7</a></li></ul></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#how-to-adjust-proxy-on-eportal-machine" class="sidebar-link">How to adjust proxy on ePortal machine</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#managing-users" class="sidebar-link">Managing Users</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#ldap-authorization" class="sidebar-link">LDAP authorization</a></li></ul></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#accessing-eportal" class="sidebar-link">Accessing ePortal</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#patchset-deployment" class="sidebar-link">PatchSet Deployment</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#managing-keys" class="sidebar-link">Managing Keys</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#managing-servers" class="sidebar-link">Managing Servers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#managing-script" class="sidebar-link">Managing Script</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#script-to-unroll-patchsets" class="sidebar-link">Script to unroll patchsets</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#script-to-determine-the-number-of-servers-under-the-management-of-eportal-per-key" class="sidebar-link">Script to determine the number of servers under the management of ePortal, per key</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#script-to-automatically-install-latest-patchsets" class="sidebar-link">Script to automatically install latest patchsets</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#unroll-patches-from-ui" class="sidebar-link">Unroll patches from UI</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#show-extended-check-in-statistics-in-admin-ui" class="sidebar-link">Show extended check-in statistics in admin UI</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#ability-to-create-read-only-users" class="sidebar-link">Ability to create read-only users</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#feed-management" class="sidebar-link">Feed Management</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#adding-extra-tag-field" class="sidebar-link">Adding extra Tag field</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#how-to-setup-eportal-to-use-https" class="sidebar-link">How to setup ePortal to use HTTPS</a></li></ul></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#deploying-kernelcare" class="sidebar-link">Deploying KernelCare</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-client-config-file" class="sidebar-link">KernelCare client config file</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#changing-eportal-ip" class="sidebar-link">Changing ePortal IP</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#configuration-locations" class="sidebar-link">Configuration &amp; locations</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#stopping-starting" class="sidebar-link">Stopping &amp; Starting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-eportal-on-el6-2" class="sidebar-link">KernelCare.ePortal on EL6</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#kernelcare-eportal-on-el7-2" class="sidebar-link">KernelCare.ePortal on EL7</a></li></ul></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#log-files" class="sidebar-link">Log Files</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#eportal-api" class="sidebar-link">ePortal API</a></li><li class="sidebar-sub-header"><a href="/kernelcare_enterprise/#nagios-zabbix-support" class="sidebar-link">Nagios &amp; Zabbix support</a></li></ul></li><li><a href="/kcare-nexpose/" class="sidebar-link">Kcare-nexpose</a></li><li><a href="/kernelcare_whmcs_plugin/" class="sidebar-link">KernelCare WHMCS Plugin</a></li><li><a href="/proxy_settings/" class="sidebar-link">Firewall and Proxy Settings</a></li><li><a href="/eol_ubuntu_lts_kernels_support/" class="sidebar-link">EOL Ubuntu LTS kernels support</a></li></ul></div></li></ul> </div> <div class="page"> <div class="breadcrumb-wrapper page-breadcrumb" data-v-5e0e0acf><span class="breadcrumb-title" data-v-5e0e0acf>Documentation:</span> <a href="/kernelcare_enterprise/" class="breadcrumb router-link-exact-active router-link-active" data-v-5e0e0acf>
    KernelCare.ePortal
  </a></div> <div class="page-nav-wrapper"><div class="page-nav"><a href="/reseller_partner_ui/" class="link prev">
      ←
    </a> <a href="/kcare-nexpose/" class="link">
      →
    </a></div></div> <div class="content"><h1 id="kernelcare-eportal"><a href="#kernelcare-eportal" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal</h1> <p>KernelCare.ePortal is a web management console for KernelCare for servers located behind the firewall, with no internet access. It is part of KernelCare Enterprise offering, and should be installed on premisses</p> <h2 id="eportal-hardware-requirements"><a href="#eportal-hardware-requirements" aria-hidden="true" class="header-anchor">#</a> ePortal Hardware Requirements</h2> <p>ePortal machine disk size doesn't change with the number of connected servers.</p> <p>Requirements are always the same:</p> <ul><li>100 GB minimum</li> <li>200 GB recommended</li> <li>SSD</li></ul> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>SSD is the crucial requirement.</p></div> <p>As far as other requirements concerned, we have tested the following configuration and the following number of connected servers:</p> <ul><li>10k of connected machines is the maximum for the following requirements:
<ul><li>VM</li> <li>1 VCPU</li> <li>1 GB RAM</li></ul></li> <li>75k of connected machines is the maximum for the following requirements:
<ul><li>Core i5</li> <li>1 CPU</li> <li>4 GB RAM</li></ul></li></ul> <h2 id="installation"><a href="#installation" aria-hidden="true" class="header-anchor">#</a> Installation</h2> <h3 id="kernelcare-eportal-on-el6"><a href="#kernelcare-eportal-on-el6" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal on EL6</h3> <p>To install KernelCare.ePortal, start with the minimal image of EL6</p> <p>For installation and workability of e-portal nginx web server is required. We recommend to use a stable version from the official nginx repository:</p> <div class="language- extra-class"><pre class="language-text"><code>$ cat &gt; /etc/yum.repos.d/nginx.repo &lt;&lt;EOL
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/6/\$basearch/
gpgcheck=0
enabled=1
EOL
</code></pre></div><p>Please find more information at <a href="http://nginx.org/en/linux_packages.html#stable" target="_blank" rel="noopener noreferrer">http://nginx.org/en/linux_packages.html#stable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Setup KernelCare.ePortal repo:</p> <div class="language- extra-class"><pre class="language-text"><code>$ cat &gt; /etc/yum.repos.d/kcare-eportal.repo &lt;&lt;EOL
[kcare-eportal]
name=kcare-eportal
baseurl=http://repo.eportal.kernelcare.com/x86_64/
gpgkey=http://repo.cloudlinux.com/kernelcare-debian/6/conf/kcaredsa_pub.gpg
enabled=1
gpgcheck=1
EOL
</code></pre></div><p>Install KernelCare.eportal:</p> <div class="language- extra-class"><pre class="language-text"><code>$ yum install kcare-eportal
</code></pre></div><h3 id="kernelcare-eportal-on-el7"><a href="#kernelcare-eportal-on-el7" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal on EL7</h3> <p>To install KernelCare.ePortal, start with the minimal image of EL7</p> <p>For installation and workability of e-portal nginx web server is required. We recommend to use stable version from the official nginx repository:</p> <div class="language- extra-class"><pre class="language-text"><code>$ cat &gt; /etc/yum.repos.d/nginx.repo &lt;&lt;EOL
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/7/\$basearch/
gpgcheck=0
enabled=1
EOL
</code></pre></div><p>Please find more information at <a href="http://nginx.org/en/linux_packages.html#stable" target="_blank" rel="noopener noreferrer">http://nginx.org/en/linux_packages.html#stable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Setup KernelCare.ePortal repo:</p> <div class="language- extra-class"><pre class="language-text"><code>$ cat &gt; /etc/yum.repos.d/kcare-eportal.repo &lt;&lt;EOL
[kcare-eportal]
name=KernelCare ePortal
baseurl=https://repo.eportal.kernelcare.com/x86_64.el7/
enabled=1
gpgkey=https://repo.cloudlinux.com/kernelcare/RPM-GPG-KEY-KernelCare
gpgcheck=1
EOL
</code></pre></div><p>Install KernelCare.eportal:</p> <div class="language- extra-class"><pre class="language-text"><code>$ yum install kcare-eportal
</code></pre></div><h2 id="how-to-adjust-proxy-on-eportal-machine"><a href="#how-to-adjust-proxy-on-eportal-machine" aria-hidden="true" class="header-anchor">#</a> How to adjust proxy on ePortal machine</h2> <p>On the ePortal machine, you should define the same proxy settings as you use in the command line.</p> <p>To do so, add <span class="notranslate"><code>PROXY = 'http://example.com'</code></span> to the following file: <span class="notranslate"><code>/usr/share/kcare-eportal/config/local.py</code></span></p> <p>If this file doesn't exist, create it with a NGINX owner:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>echo &quot;PROXY = 'http://example.com'&quot; &gt; /usr/share/kcare-eportal/config/local.py
chown nginx:nginx /usr/share/kcare-eportal/config/local.py
</code></pre></div></div> <p>Restart ePortal (see <a href="/kernelcare_enterprise/#stopping-starting">Stopping &amp; Starting</a> section, choose a corresponding OS).</p> <h2 id="managing-users"><a href="#managing-users" aria-hidden="true" class="header-anchor">#</a> Managing Users</h2> <p>You can manage portal using <code>/usr/bin/kc.eportal</code> utility:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><code>-l</code></td> <td><code>--list-users</code></td> <td>list all users</td></tr> <tr><td><code>-a</code></td> <td><code>--add-user</code></td> <td>add a user</td></tr> <tr><td><code>-d</code></td> <td><code>--delete-user</code></td> <td>delete a user</td></tr> <tr><td><code>-c</code></td> <td><code>--change-password</code></td> <td>change a user password</td></tr> <tr><td><code>-p</code></td> <td><code>--password</code></td> <td>provide a password for a user</td></tr> <tr><td><code>-h</code></td> <td><code>--help</code></td> <td>show this help</td></tr></tbody></table> <p>To add a user:</p> <div class="language- extra-class"><pre class="language-text"><code>$ kc.eportal -a admin -p AdminPassword
</code></pre></div><p>To change user's password:</p> <div class="language- extra-class"><pre class="language-text"><code>$ kc.eportal -c admin -p NewPassword
</code></pre></div><h3 id="ldap-authorization"><a href="#ldap-authorization" aria-hidden="true" class="header-anchor">#</a> LDAP authorization</h3> <p>It is possible to support a secure connection. To do so, specify the right format of connection string as a key to enter user login.</p> <p>For example:</p> <p><code>uid=%s,dc=example,dc=com</code></p> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>This key is a must in a connection string and should include <code>%s</code></p></div> <p>You are also able to specify security settings and set-up timeouts using LDAP URL.</p> <h2 id="accessing-eportal"><a href="#accessing-eportal" aria-hidden="true" class="header-anchor">#</a> Accessing ePortal</h2> <p>To access KernelCare.eportal management console, connect to:
<strong>http://YOUR_IP/admin</strong></p> <p>And enter your login &amp; password</p> <p><img src="/images/access_eportal.png" alt></p> <p>You can manage your login information using <a href="/kernelcare_enterprise/#managing-users">kc.eportal tool</a>.</p> <h2 id="patchset-deployment"><a href="#patchset-deployment" aria-hidden="true" class="header-anchor">#</a> PatchSet Deployment</h2> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>ePortal v0.8+</p></div> <p>KernelCare.ePortal has built-in mechanism to download latest patches. To start using it, click <em>Patch Source</em> link in KernelCare.ePortal navigational bar and then click Settings. Your patch source access info will be provided by your KernelCare representative.</p> <p><img src="/images/eportal_dep01_1_zoom70.png" alt></p> <p>Once you set up patch source access info, you will get to a list of available patchsets. You can always go back &amp; change your access info by clicking <em>Source</em> link.</p> <p><img src="/images/eportal_dep02_1_zoom70.png" alt></p> <p>Clicking on <em>[changelog]</em> will provide changelog for given patchset.
Clicking on <em>[deploy this patch, and all before it]</em> will download and deploy this patchset and all the patchsets above. It is impossible to deploy patchsets out of order.</p> <h2 id="managing-keys"><a href="#managing-keys" aria-hidden="true" class="header-anchor">#</a> Managing Keys</h2> <p>To register new servers you need to create a KernelCare key that will be used for server registration.
To go to the list of keys, click the KernelCare ePortal logo at the top left.</p> <p><img src="/images/key-menu_zoom70.png" alt></p> <ul><li>To edit a key, click <img src="/images/eportal_keys_edit.png" alt> . The <em>Edit</em> tab opens.</li> <li>To remove a key, click <img src="/images/eportal_keys_remove.png" alt> . Please note, that removing the key would remove all servers under that key.</li> <li>Click a key to go to Servers tab with the list of <a href="/kernelcare_enterprise/#managing-servers">servers registered</a> under that key. You can also remove servers on that tab.</li></ul> <p>To create a new registration click <em>Create</em> tab.
<img src="/images/key-creation_zoom70.png" alt>
Fill in the following fields:</p> <ul><li><strong>Key</strong> —  you can provide a key name or leave the field empty, so an automatically generated name will be used</li> <li><strong>Description</strong> — you can provide a description for the key</li> <li><strong>Server Limit</strong> — the amount of servers that can be registered under that key</li> <li><strong>Feed</strong> — select a specific feed or leave empty.</li></ul> <p>Click <em>Save</em> to add the key. The new registration key will be created and added to the list. The key itself will be used as a part of the registration command on an individual server.</p> <p>Click <em>Save and Add Another</em> to save this key and add one more key.</p> <p>Click <em>Save and Continue Editing</em> to add the key and open the key edit tab.</p> <p>Click <em>Cancel</em> to return to the key list tab without adding a new key.</p> <h2 id="managing-servers"><a href="#managing-servers" aria-hidden="true" class="header-anchor">#</a> Managing Servers</h2> <p>You can see servers belonging to the key by clicking on the key itself in <a href="/kernelcare_enterprise/#managing-keys">Managing Keys</a> interface.</p> <p><img src="/images/server_list_1_zoom70.png" alt></p> <p>The screen shows servers registered under the key, their IP, hostname, effective kernel as well as the time of registration and last check in.</p> <h3 id="managing-script"><a href="#managing-script" aria-hidden="true" class="header-anchor">#</a> Managing Script</h3> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>If scripts do not work on your ePortal, you might need to update ePortal first. To update ePortal, please run the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; yum update kcare-eportal
</code></pre></div></div> <p>To view the list of all servers IDs that are connected to the particular key, do the following:</p> <ul><li>In the UI go to the page with the list of keys. Then click the particular key. The list of servers connected to this key will be displayed.</li></ul> <p>To view the list of all servers IDs that are not connected to any key, use the <span class="notranslate"><em>Servers</em></span> button on the navigation bar.</p> <p><img src="/images/eportal-servers.png" alt></p> <h3 id="script-to-unroll-patchsets"><a href="#script-to-unroll-patchsets" aria-hidden="true" class="header-anchor">#</a> Script to unroll patchsets</h3> <p>To unroll patchset, run:</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; kc.eportal --unroll 16012017_1
</code></pre></div><h3 id="script-to-determine-the-number-of-servers-under-the-management-of-eportal-per-key"><a href="#script-to-determine-the-number-of-servers-under-the-management-of-eportal-per-key" aria-hidden="true" class="header-anchor">#</a> Script to determine the number of servers under the management of ePortal, per key</h3> <p>To see pairs of key/number of servers run:</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; kc.eportal --list-servers
</code></pre></div><table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>Count</td> <td>Key</td></tr> <tr><td><code>0</code></td> <td><code>2shcolu7Y1x6885Q</code></td></tr> <tr><td><code>2</code></td> <td><code>6J89aS44j6OmTr05</code></td></tr></tbody></table> <h3 id="script-to-automatically-install-latest-patchsets"><a href="#script-to-automatically-install-latest-patchsets" aria-hidden="true" class="header-anchor">#</a> Script to automatically install latest patchsets</h3> <p>It determines if latest patches are available and installs them.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;kc.eportal --get-latest
</code></pre></div><h3 id="unroll-patches-from-ui"><a href="#unroll-patches-from-ui" aria-hidden="true" class="header-anchor">#</a> Unroll patches from UI</h3> <p>In the patch-source page, there is a list of available patches. To unroll patches click the button <em>Roll back this patch, and all after it</em>.
Use it to roll back the patch and all the following patches.</p> <h3 id="show-extended-check-in-statistics-in-admin-ui"><a href="#show-extended-check-in-statistics-in-admin-ui" aria-hidden="true" class="header-anchor">#</a> Show extended check-in statistics in admin UI</h3> <p>A new table is added to the starting page. This table displays the following:</p> <ul><li>Total number of servers.</li> <li>Number of servers that checked in for the past 48 hours.</li></ul> <p>The number of servers for each key is listed in the <em>Key Inventory</em> table.</p> <h3 id="ability-to-create-read-only-users"><a href="#ability-to-create-read-only-users" aria-hidden="true" class="header-anchor">#</a> Ability to create read-only users</h3> <div class="language- extra-class"><pre class="language-text"><code>[root@localhost ~]# kc.eportal -l
Num | Username
--- + --------------------------------
 1 | admin
 2 | user
[root@localhost ~]# kc.eportal -r user
User 'user' is now readonly
</code></pre></div><h3 id="feed-management"><a href="#feed-management" aria-hidden="true" class="header-anchor">#</a> Feed Management</h3> <p>Feeds are intended to manage patchsets on the server, and they provide a possibility to bind a set of patches to a specific key. Possible use cases: for preliminary testing of patches, for applying updates to groups of servers with the similar hardware, etc.</p> <p>To get into Feeds Management interface go to Settings → Feeds:</p> <p><img src="/images/feed-button_zoom70.png" alt></p> <p>On this page a user can manage the existing feeds: create, delete, edit.</p> <p><img src="/images/feed-menu_zoom70.png" alt></p> <p>Available options:</p> <ul><li>Name — a name of a feed.</li> <li>Auto update — enable and disable automatic downloading of patches to this feed.</li> <li>Deploy after X hours — a delay in hours between the moment the patchset is available for deployment and the moment it is installed to the feed.</li></ul> <p>Every 10 minutes ePortal checks for new patches on the main patch server. If a new patch is available, it is uploaded to the ePortal server. Note: it is uploaded but is not deployed. The patch availability time is considered starting from the moment a new patch appears on the ePortal, and that time is taken into account in <code>Deploy after X hours</code> option. So, if a user sets <code>Deploy after X hours = 10</code>, the patch will be deployed to the feed 10 hours after it has been downloaded to the ePortal server.</p> <p>To make the feed auto-update immediately (so that, new patches are loaded to the feed immediately after they are available on ePortal), set <code>Deploy after X hours = 0</code>.</p> <p>A special case is a clean installation when ePortal is installed on a new server (there aren't any downloaded archives with patches and feeds with deployed patchsets, including default feed). In this case, if a user creates a new feed and sets Deployed after X hours option right away, then all patches (from the oldest to the latest available) will be deployed to the feed after the specified X hours. This is because the archives are downloaded from scratch and will be considered as “just appeared on ePortal” — that is, all patches will have the same appearance time on ePortal from which the option Deploy after X hours will repel.</p> <p><img src="/images/feedmanagement3_zoom70.png" alt></p> <p>On the main ePortal page, a user can set the corresponding key &lt;&gt; feed pair. This is done in the key creation interface or when editing a key.</p> <p><img src="/images/feedmanagement4_zoom70.png" alt></p> <p>By default, a new key is bound to the default feed, alternatively, a user can choose a desired feed from the drop-down menu.</p> <p><img src="/images/feedmanagement5_01_zoom70.png" alt></p> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>When removing a feed all keys attached to this feed will be moved to the default feed.</p></div> <p><img src="/images/feedmanagement6_zoom70.png" alt></p> <h3 id="adding-extra-tag-field"><a href="#adding-extra-tag-field" aria-hidden="true" class="header-anchor">#</a> Adding extra Tag field</h3> <p>To add an extra Tag field for the server, run:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --tag command
</code></pre></div><p>where <code>command</code> is a parameter defined by a user. This parameter will be displayed in UI for the server. User could add multiple tags for each server. Each tag should be separated with <code>;</code> symbol.</p> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --tag “env:prod;ubuntu”
</code></pre></div><p>This server has two tags : <code>env:prod</code> and <code>ubuntu</code>.</p> <p><code>env:prod</code> is a parameter that has tag name <code>env</code> and the value <code>prod</code>.</p> <p><img src="/images/addingextratagfield_zoom88.png" alt></p> <p>To remove all tags from a particular server, run:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --tag &quot;&quot;
</code></pre></div><p>Where <code>&quot;&quot;</code> is a parameter to delete the previously defined tag.</p> <h3 id="how-to-setup-eportal-to-use-https"><a href="#how-to-setup-eportal-to-use-https" aria-hidden="true" class="header-anchor">#</a> How to setup ePortal to use HTTPS</h3> <p>Some assumptions for a server where e-portal is deployed:</p> <ol><li>A firewall is disabled for 443 port.</li> <li>Private and public keys are downloaded on the server.</li></ol> <ul><li>Edit ssl configuration template according to your certificates:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mv /etc/nginx/eportal.ssl.conf.example /etc/nginx/eportal.ssl.conf
vi /etc/nginx/eportal.ssl.conf
</code></pre></div><ul><li>Include this configuration into the main one:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sed -e '3iinclude eportal.ssl.conf;' -i /etc/nginx/conf.d/eportal.conf
</code></pre></div><ul><li>Restart nginx:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>service nginx restart
</code></pre></div><p>In order to communicate with e-portal, updated to https, you need to modify KernelCare config files on all the servers if they have IPs hardcoded servers settings.</p> <p>To do that, update <code>PATCH_SERVER</code> and <code>REGISTRATION_URL</code> environment variables:</p> <div class="language- extra-class"><pre class="language-text"><code>vi /etc/sysconfig/kcare/kcare.conf
</code></pre></div><p>So, after editing your <code>/etc/sysconfig/kcare/kcare.conf</code> should contain updated <code>PATCH_SERVER</code> and <code>REGISTRATION_URL</code> environment variables like in the example below:</p> <div class="language- extra-class"><pre class="language-text"><code>PATCH_SERVER=https://eportal_domain_name/
REGISTRATION_URL=https://eportal_domain_name/admin/api/kcare
</code></pre></div><p>The following example demonstrates how to connect new servers to e-portal configured for https:</p> <div class="language- extra-class"><pre class="language-text"><code>$ export KCARE_PATCH_SERVER=https://eportal_domain_name/
$ export KCARE_REGISTRATION_URL=https://eportal_domain_name/admin/api/kcare
$ export KCARE_MAILTO=admin@mycompany.com
$ curl -s https://repo.cloudlinux.com/kernelcare/kernelcare_install.sh | bash
$ /usr/bin/kcarectl --register key_from_your_eportal
</code></pre></div><h2 id="deploying-kernelcare"><a href="#deploying-kernelcare" aria-hidden="true" class="header-anchor">#</a> Deploying KernelCare</h2> <p>To deploy kernelcare client software to use ePortal, following enviornment variables should be setup prior to RPM install:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><strong>Environment Variable</strong></td> <td><strong>Value</strong></td> <td><strong>Description</strong></td></tr> <tr><td><code>KCARE_PATCH_SERVER</code></td> <td>http://eportal_ip/</td> <td>URL to a server from which patches will be downloaded</td></tr> <tr><td><code>KCARE_REGISTRATION_URL</code></td> <td>http://eportal_ip/admin/api/kcare</td> <td>URL to ePortal's api</td></tr> <tr><td><code>KCARE_MAILTO [2.5+]</code></td> <td>email@address</td> <td>Email to receive all notifications related to failed KernelCare updates. Used in <code>/etc/cron.d/kcare-cron</code></td></tr></tbody></table> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>$ export KCARE_PATCH_SERVER=http://10.1.10.115/
$ export KCARE_REGISTRATION_URL=http://10.1.10.115/admin/api/kcare
$ export KCARE_MAILTO=admin@mycompany.com
$ curl -s https://repo.cloudlinux.com/kernelcare/kernelcare_install.sh | bash
$ kcarectl --register r72fF838Q47oWigj
</code></pre></div><h2 id="kernelcare-client-config-file"><a href="#kernelcare-client-config-file" aria-hidden="true" class="header-anchor">#</a> KernelCare client config file</h2> <p>KernelCare client configuration file is located in <code>/etc/sysconfig/kcare/kcare.conf</code></p> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>AUTO_UPDATE=True
PATCH_SERVER=http://10.1.10.115/
REGISTRATION_URL=http://10.1.10.115/admin/api/kcare
</code></pre></div><p>If <code>AUTO_UPDATE</code> set to <code>True</code>, KernelCare client will check in every 4 hours, and try to download and apply latest patches</p> <p><code>PATCH_SERVER</code> - server from which patches will be downloaded</p> <p><code>REGISTRATION_URL</code> - URL used to register/unregister server</p> <h2 id="changing-eportal-ip"><a href="#changing-eportal-ip" aria-hidden="true" class="header-anchor">#</a> Changing ePortal IP</h2> <p>You can change ePortal IP at any moment, but you need to modify KernelCare config files on all the servers if they have IPs hardcoded.</p> <p>To do that, edit: <code>/etc/sysconfig/kcare/kcare.conf</code></p> <p>Change:</p> <div class="language- extra-class"><pre class="language-text"><code>PATCH_SERVER=http://10.1.10.115/
REGISTRATION_URL=http://10.1.10.115/admin/api/kcare
</code></pre></div><p>To point to the right location.</p> <h2 id="configuration-locations"><a href="#configuration-locations" aria-hidden="true" class="header-anchor">#</a> Configuration &amp; locations</h2> <p>Web Server (nginx) configuration is located at <code>/etc/nginx/conf.d/eportal.conf</code></p> <p>Database (sqlite) is stored in <code>/usr/share/kcare-eportal/data.sqlite</code>
To reset database:</p> <div class="language- extra-class"><pre class="language-text"><code>$ rm /usr/share/kcare-eportal/data.sqlite
$ cd /usr/share/kcare-eportal &amp;&amp; python createdb.py
</code></pre></div><p>Client access data file used to decide if server has access to the patches is stored in <code>/usr/share/kcare-eportal/kcare_servers.htpasswd</code></p> <p>Patches are stored in: <code>/usr/share/kcare-eportal/patches</code></p> <h2 id="stopping-starting"><a href="#stopping-starting" aria-hidden="true" class="header-anchor">#</a> Stopping &amp; Starting</h2> <h3 id="kernelcare-eportal-on-el6-2"><a href="#kernelcare-eportal-on-el6-2" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal on EL6</h3> <p>To stop/start/reload/restart configuration of nginx server:</p> <div class="language- extra-class"><pre class="language-text"><code>$ /etc/init.d/nginx stop|start|reload|restart
</code></pre></div><p>To stop/start/restart ePortal (Python):</p> <div class="language- extra-class"><pre class="language-text"><code>$ /etc/init.d/uwsgi stop|start|restart
</code></pre></div><h3 id="kernelcare-eportal-on-el7-2"><a href="#kernelcare-eportal-on-el7-2" aria-hidden="true" class="header-anchor">#</a> KernelCare.ePortal on EL7</h3> <p>To stop/start/reload/restart configuration of nginx server:</p> <div class="language- extra-class"><pre class="language-text"><code>$ systemctl stop|start|reload|restart nginx
</code></pre></div><p>To stop/start/restart ePortal (Python):</p> <div class="language- extra-class"><pre class="language-text"><code>$ systemctl stop|start|restart emperor.uwsgi
</code></pre></div><h2 id="log-files"><a href="#log-files" aria-hidden="true" class="header-anchor">#</a> Log Files</h2> <p>ePortal messages/errors: <code>/var/log/uwsgi/uwsgi-emperor.log</code></p> <p>nginx ePortal access log: <code>/var/log/nginx/kcare-eportal.log</code></p> <p>nginx error log: <code>/var/log/nginx/error_log</code></p> <h2 id="eportal-api"><a href="#eportal-api" aria-hidden="true" class="header-anchor">#</a> ePortal API</h2> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>version 0.9+</p></div> <p>KernelCare.ePortal provides limited API to remove servers based on key &amp; IP.</p> <p>To access the API, first setup API token used for authentication:</p> <p><code>echo your_token &gt; /usr/share/kcare-eportal/config/api.token</code></p> <p>API method: <code>unregister_by_key.plain</code></p> <p>Parameters:</p> <ul><li>key - KernelCare.ePortal key under which server is registered;</li> <li>IP - remote server IP as displayed in KernelCare.ePortal;</li> <li>token - API token.</li></ul> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>https://ePortal_url/admin/api/kcare/unregister_by_key.plain?key=2M6gmIS6fHh39aF2&amp;ip=10.1.10.74&amp;token=your_token
</code></pre></div><p>Return code: int</p> <ul><li><code>-3</code> - API token file does not exist;</li> <li><code>-2</code> - API token doesn't match;</li> <li><code>-1</code> - Internal error, see <code>/var/log/uwsgi/uwsgi-emperor.log</code> for details;</li> <li>any other number - number of servers removed.</li></ul> <h2 id="nagios-zabbix-support"><a href="#nagios-zabbix-support" aria-hidden="true" class="header-anchor">#</a> Nagios &amp; Zabbix support</h2> <p>KernelCare.ePortal since version 1.2 supports server monitoring similar to <a href="/nagios_plugin/">Nagios</a> &amp; <a href="/zabbix_template/">Zabbix</a> monitoring.</p> <p>You can curl the API directly to receive the information:</p> <div class="language- extra-class"><pre class="language-text"><code>https://yourserver/admin/api/kcare/nagios/KCAREKEY
</code></pre></div><p>or you can use <a href="http://patches.kernelcare.com/downloads/nagios/check_kcare" target="_blank" rel="noopener noreferrer">http://patches.kernelcare.com/downloads/nagios/check_kcare<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> script by modifying KEY_KCARE_NAGIOS_ENDPOINT in it to point to your server (change <a href="https://cln.cloudlinux.com/clweb" target="_blank" rel="noopener noreferrer">https://cln.cloudlinux.com/clweb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (link to old UI) or <a href="https://cln.cloudlinux.com/console/auth/login" target="_blank" rel="noopener noreferrer">https://cln.cloudlinux.com/console/auth/login<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (link to new UI) with <a href="https://yourserver/admin" target="_blank" rel="noopener noreferrer">https://yourserver/admin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ).</p> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>Access using <code>PARTNER_LOGIN/TOKEN</code> is not supported by KernelCare.ePortal.</p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/cloudlinux/kernelcare-doc/edit/dev/docs/kernelcare_enterprise/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> </div> <div class="footer" data-v-20b89de8><div data-v-20b89de8><a href="https://cloudlinux.com" data-v-20b89de8><img src="/assets/img/we-are-cloudlinux.783ed390.svg" alt="We are Cloudlinux" data-v-20b89de8></a></div> <div class="footer-company-title" data-v-20b89de8>2019. CloudLinux Inc</div> <div data-v-20b89de8><div data-v-20b89de8><a href="https://www.kernelcare.com/install-kernelcare/" target="_blank" data-v-20b89de8>How to</a></div><div data-v-20b89de8><a href="https://www.kernelcare.com/faq/" target="_blank" data-v-20b89de8>Sales and Technical FAQs</a></div><div data-v-20b89de8><a href="https://cloudlinux.zendesk.com/hc/en-us/requests/new" target="_blank" data-v-20b89de8>Contact support</a></div><div data-v-20b89de8><a href="https://www.kernelcare.com/blog/" target="_blank" data-v-20b89de8>Blog</a></div></div> <div class="social" data-v-20b89de8><span class="footer-social-text" data-v-20b89de8></span> <a href="https://www.facebook.com/kernelcare/" target="_blank" data-v-20b89de8><img src="/fb.png" class="footer-social-logo" data-v-20b89de8></a><a href="https://twitter.com/kernelcare/" target="_blank" data-v-20b89de8><img src="/tw.png" class="footer-social-logo" data-v-20b89de8></a><a href="https://linkedin.com/company/cloudlinux" target="_blank" data-v-20b89de8><img src="/in.png" class="footer-social-logo" data-v-20b89de8></a><a href="https://www.youtube.com/channel/UCZ3YMHWnMP7TaxlXVay5-aw" target="_blank" data-v-20b89de8><img src="/ytube.png" class="footer-social-logo" data-v-20b89de8></a></div></div> <!----></div></div>
    <script src="/assets/js/app.e4772670.js" defer></script><script src="/assets/js/14.802341b0.js" defer></script>
  </body>
</html>
